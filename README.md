## Device Stats API
Проект предназначен для сбора, хранения и анализа данных от устройств, а также связывания их с пользователями.

### Возможности
1. Приём данных от устройств (x, y, z + device_id)

2. Анализ данных по устройству или пользователю (min, max, sum, count, median)

3. Привязка устройства к пользователю

4. Группировка статистики по каждому устройству пользователя

### Установка и запуск
Для того чтобы запустить сервис необходим Docker, т.к. бд поднимается в контейнере, как и сам сервис.
После этого достаточно склонировать репозиторий, перейти в его директорию. Переименовать файл переменных окружения .env.dist в .env и запустить контейнеры
```shell
> git clone <repository>
> cd <project_directory>
> mv .env.dist .env
> docker-compose up
```

### Примеры запросов
1. Отправить данные от устройства
```http
POST /stats/
Headers: device_id: DEVICE123

Body:
{
  "x": 1.23,
  "y": 2.34,
  "z": 3.45
}
```
2. Анализ данных по устройству
```http
GET /stats/analyze/?device_id=DEVICE123
```
3. Привязка устройства к пользователю
```http
POST /user/link_device/
Body:
{
  "user_id": "user_1",
  "device_id": "DEVICE123"
}
```
4. Сводка по пользователю
```http
GET /user/user_1/stats
```
5. Анализ по каждому устройству пользователя
```http
GET /user/user_1/device_stats
```